// ===== EVANGELION LANGUAGE SYSTEM =====

// All website translations
const translations = {
    // Japanese - Default Language
    jp: {
        // Main navigation
        'nav-intro': 'ã‚¤ãƒ³ãƒˆãƒ­',
        'nav-overview': 'æ¦‚è¦',
        'nav-pilots': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'nav-units': 'ãƒ¦ãƒ‹ãƒƒãƒˆ',
        'nav-archive': 'ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–',
        'nav-map': 'ãƒžãƒƒãƒ—',
        'nav-report': 'ãƒ¬ãƒãƒ¼ãƒˆ',

        // Intro section
        'sync-status': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆå…¥åŠ›å¾…æ©Ÿä¸­',
        'initiate-sync': 'ã‚·ãƒ³ã‚¯ãƒ­é–‹å§‹',
        'sync-ratio': 'ã‚·ãƒ³ã‚¯ãƒ­çŽ‡:',
        'neural-link': 'ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒªãƒ³ã‚¯:',
        'at-field': 'A.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:',
        'standby': 'å¾…æ©Ÿ',
        'inactive': 'éžæ´»æ€§',
        'synchronization-progress': 'ã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³é€²è¡Œä¸­',
        'synchronization-complete': 'ã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†',
        'connecting': 'æŽ¥ç¶šä¸­',
        'active': 'æ´»æ€§',
        'deploying': 'å±•é–‹ä¸­',

        // Hero section
        'enter-world': 'ä¸–ç•Œã«å…¥ã‚‹',
        'neon-genesis': 'ãƒã‚ªãƒ³ãƒ»ã‚¸ã‚§ãƒã‚·ã‚¹',
        'evangelion': 'ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³',

        // Synopsis section
        'series-overview': 'ã‚·ãƒªãƒ¼ã‚ºæ¦‚è¦',
        'synopsis-text': '2015å¹´ã€ä¸–ç•Œã¯é»™ç¤ºéŒ²ã®ç€¬æˆ¸éš›ã«ç«‹ã£ã¦ã„ã‚‹ã€‚ã€Œä½¿å¾’ã€ã¨å‘¼ã°ã‚Œã‚‹è¬Žã®å­˜åœ¨ãŒäººé¡žã®å­˜åœ¨ã‚’è„…ã‹ã—ã€å·¨å¤§ãªãƒã‚¤ã‚ªãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒ¡ã‚«ã€Œã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ã€ã ã‘ãŒå½¼ã‚‰ã«ç«‹ã¡å‘ã‹ã†ã“ã¨ãŒã§ãã‚‹ã€‚14æ­³ã®ç¢‡ã‚·ãƒ³ã‚¸ã¯ã€å½±ã®çµ„ç¹”NERVã®ãŸã‚ã«ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³åˆå·æ©Ÿã‚’æ“ç¸¦ã™ã‚‹ã‚ˆã†çˆ¶ã«å«Œã€…ãªãŒã‚‰å‹Ÿé›†ã•ã‚Œã‚‹ã€‚ã—ã‹ã—ã€ã‚·ãƒ³ã‚¸ãŒå·¨å¤§ãƒ­ãƒœãƒƒãƒˆã¨å®‡å®™çš„ææ€–ã®ã“ã®ä¸–ç•Œã‚’æ·±ãæŽ˜ã‚Šä¸‹ã’ã‚‹ã«ã¤ã‚Œã¦ã€æ•‘æ¸ˆã¨ç ´æ»…ã®å¢ƒç•Œç·šã¯å½¼ãŒæƒ³åƒã—ã¦ã„ãŸã‚ˆã‚Šã‚‚ã¯ã‚‹ã‹ã«è–„ã„ã“ã¨ã‚’ç™ºè¦‹ã™ã‚‹ã€‚',

        // Characters section
        'characters': 'ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼',
        'shinji-ikari': 'ç¢‡ã‚·ãƒ³ã‚¸',
        'pilot': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'rei-ayanami': 'ç¶¾æ³¢ãƒ¬ã‚¤',
        'asuka-langley': 'æƒ£æµãƒ»ã‚¢ã‚¹ã‚«ãƒ»ãƒ©ãƒ³ã‚°ãƒ¬ãƒ¼',
        'gendo-ikari': 'ç¢‡ã‚²ãƒ³ãƒ‰ã‚¦',
        'commander': 'å¸ä»¤å®˜',
        'misato-katsuragi': 'è‘›åŸŽãƒŸã‚µãƒˆ',
        'major': 'å°‘ä½',
        'kaworu-nagisa': 'æ¸šã‚«ãƒ²ãƒ«',
        'angel': 'ä½¿å¾’',
        'ryoji-kaji': 'åŠ æŒãƒªãƒ§ã‚¦ã‚¸',
        'agent': 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ',
        'ritsuko-akagi': 'èµ¤æœ¨ãƒªãƒ„ã‚³',
        'scientist': 'ç§‘å­¦è€…',
        'select-character': 'ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠž',
        'click-character-info': 'ä¸Šã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æƒ…å ±ã‚’è¡¨ç¤º',
        'age': 'å¹´é½¢:',
        'role': 'å½¹å‰²:',

        // Character roles
        'shinji-role': 'ã‚µãƒ¼ãƒ‰ãƒ»ãƒãƒ«ãƒ‰ãƒ¬ãƒ³ / EVA-01ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'rei-role': 'ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ»ãƒãƒ«ãƒ‰ãƒ¬ãƒ³ / EVA-00ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'asuka-role': 'ã‚»ã‚«ãƒ³ãƒ‰ãƒ»ãƒãƒ«ãƒ‰ãƒ¬ãƒ³ / EVA-02ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'gendo-role': 'NERVå¸ä»¤å®˜',
        'misato-role': 'ä½œæˆ¦éƒ¨é•·',
        'kaworu-role': 'ãƒ•ã‚£ãƒ•ã‚¹ãƒ»ãƒãƒ«ãƒ‰ãƒ¬ãƒ³ / ç¬¬17ä½¿å¾’',
        'ryoji-role': 'NERVç‰¹å‹™æ¤œæŸ»å®˜ / ã‚¹ãƒ‘ã‚¤',
        'ritsuko-role': 'ä¸»ä»»ç§‘å­¦è€… / EVAé–‹ç™ºè€…',

        // Characters descriptions
        'shinji-description': 'äººé¡žã®æ•‘ä¸–ä¸»ã®å½¹å‰²ã«æŠ¼ã—è¾¼ã¾ã‚ŒãŸä¸æœ¬æ„ãªåä»£ã€‚ã†ã¤ç—…ã€è¦‹æ¨ã¦ã‚‰ã‚Œã‚‹ã“ã¨ã¸ã®ä¸å®‰ã€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³åˆå·æ©Ÿã‚’æ“ç¸¦ã™ã‚‹é‡åœ§ã«è‹¦ã—ã‚“ã§ã„ã‚‹ã€‚',
        'rei-description': 'ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³é›¶å·æ©Ÿã‚’æ“ç¸¦ã™ã‚‹è¬Žã‚ã„ã¦é™ã‹ãªå°‘å¥³ã€‚å½¼å¥³ã®è¬Žã‚ã„ãŸæ€§è³ªã¯ã€äººé¡žè£œå®Œè¨ˆç”»ã¨ã®æ·±ã„ã¤ãªãŒã‚Šã‚’éš ã—ã¦ã„ã‚‹ã€‚',
        'asuka-description': 'ãƒ‰ã‚¤ãƒ„å‡ºèº«ã®èª‡ã‚Šé«˜ãç«¶äº‰å¿ƒã®å¼·ã„ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã€‚å½¼å¥³ã®å¤–å‘çš„ãªæ€§æ ¼ã¯ã€æ·±ã„ä¸å®‰æ„Ÿã¨ãƒˆãƒ©ã‚¦ãƒžçš„ãªéŽåŽ»ã‚’éš ã—ã¦ã„ã‚‹ã€‚',
        'gendo-description': 'ã‚·ãƒ³ã‚¸ã®ç–Žé ãªçˆ¶ã§ã‚ã‚ŠNERVã®å¸ä»¤å®˜ã€‚å†·æ·€ã§è¨ˆç®—é«˜ã„ç”·ã§ã€æœ€çµ‚çš„ãªç›®æ¨™ã¯äººé¡žè£œå®Œè¨ˆç”»ã‚’é€šã—ã¦äº¡ããªã£ãŸå¦»ã¨å†ä¼šã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚',
        'misato-description': 'ã‚·ãƒ³ã‚¸ã¨ã‚¢ã‚¹ã‚«ã®ä¿è­·è€…ã‚’å‹™ã‚ã‚‹è‹¥ã„å¥³æ€§ã€‚ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªæ…‹åº¦ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€å½¼å¥³ã¯ã‚»ã‚«ãƒ³ãƒ‰ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã®è¨˜æ†¶ã«æ‚©ã¾ã•ã‚Œã¦ã„ã‚‹ç†Ÿç·´ã—ãŸæˆ¦è¡“å®¶ã§ã‚ã‚‹ã€‚',
        'kaworu-description': 'äººé–“ã®å§¿ã‚’ã¨ã£ã¦ç¾ã‚Œã‚‹æœ€å¾Œã®ä½¿å¾’ã€‚ã‚·ãƒ³ã‚¸ã¨ã®é–¢ä¿‚ãŒã‚·ãƒªãƒ¼ã‚ºã®çµè«–ã«ãŠã„ã¦é‡è¦ã«ãªã‚‹ã€‚',
        'ryoji-description': 'è¤‡æ•°ã®çµ„ç¹”ã®ãŸã‚ã«åƒãè¬Žã®ä¸‰é‡ã‚¹ãƒ‘ã‚¤ã€‚ãƒŸã‚µãƒˆã®å…ƒæ‹äººã§ã‚ã‚Šã€NERVã®çœŸã®è­°é¡Œã¨äººé¡žè£œå®Œè¨ˆç”»ã‚’èª¿æŸ»ã™ã‚‹é‡è¦äººç‰©ã€‚',
        'ritsuko-description': 'NERVã®ä¸»ä»»ç§‘å­¦è€…ã§ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ãƒ¦ãƒ‹ãƒƒãƒˆã®ä¸»ä»»é–‹ç™ºè€…ã€‚æ•…èµ¤æœ¨ãƒŠã‚ªã‚³åšå£«ã®å¨˜ã§ã€MAGIã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¶­æŒã—ã€è‡ªåˆ†ã®ä»•äº‹ã«ã¤ã„ã¦è¤‡é›‘ãªæ„Ÿæƒ…ã‚’æŠ±ã„ã¦ã„ã‚‹ã€‚',

        // Eva section
        'evangelion-units': 'ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ãƒ¦ãƒ‹ãƒƒãƒˆ',
        'eva-designation': 'æ©Ÿä½“å:',
        'eva-pilot': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ:',
        'eva-status': 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:',
        'eva-sync-ratio': 'ã‚·ãƒ³ã‚¯ãƒ­çŽ‡:',
        'eva-at-field': 'A.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:',
        'eva-entry-plug': 'ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ—ãƒ©ã‚°:',
        'classified': '[æ©Ÿå¯†]',
        'unit-02': 'ãƒ¦ãƒ‹ãƒƒãƒˆ-02',
        'unit-01': 'ãƒ¦ãƒ‹ãƒƒãƒˆ-01',
        'unit-00': 'ãƒ¦ãƒ‹ãƒƒãƒˆ-00',
        'eva-active': 'æ´»æ€§',
        'eva-berserk': 'æš´èµ°ãƒ¢ãƒ¼ãƒ‰',
        'eva-prototype': 'ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—',
        'eva-operational': 'é‹ç”¨ä¸­',
        'eva-unlimited': 'ç„¡åˆ¶é™',
        'eva-stable': 'å®‰å®š',
        'lcl-filled': 'LCLå……å¡«',
        'lcl-saturated': 'LCLé£½å’Œ',
        'lcl-optimal': 'LCLæœ€é©',

        // Footer
        'landmark-series': 'è¨˜å¿µç¢‘çš„ã‚·ãƒªãƒ¼ã‚º',
        'redefined-anime': 'ã‚¢ãƒ‹ãƒ¡ã‚’å†å®šç¾©ã—ãŸ',
        'developer': 'é–‹ç™ºè€…',
        'academic-project': 'å­¦è¡“ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
        'programming-4': 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° 4',
        'educational-purposes': 'æ•™è‚²ç›®çš„ã§ä½œæˆã•ã‚Œã¾ã—ãŸã€‚',
        
        // Sync Overlay
        'sync-ratio': 'ã‚·ãƒ³ã‚¯ãƒ­çŽ‡:',
        'neural-link': 'ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒªãƒ³ã‚¯:',
        'at-field': 'A.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:',
        'standby': 'ã‚¹ã‚¿ãƒ³ãƒã‚¤',
        'inactive': 'ä¸æ´»æ€§',
        'awaiting-pilot': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆå…¥åŠ›å¾…æ©Ÿä¸­',
        'initiate-sync': 'åŒæœŸé–‹å§‹',

        // Map page
        'tactical-map': 'æˆ¦è¡“ãƒžãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ',
        'map-controls': 'ãƒžãƒƒãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«:',
        'reset-view': 'ãƒ“ãƒ¥ãƒ¼ãƒªã‚»ãƒƒãƒˆ',
        'satellite': 'è¡›æ˜Ÿ',
        'terrain': 'åœ°å½¢',
        'labels': 'ãƒ©ãƒ™ãƒ«',

        // Report page
        'mission-report': 'ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ¬ãƒãƒ¼ãƒˆ',
        'classified-nerv': 'NERVæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹',
        'security-level': 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ™ãƒ«: åˆ¶é™',
        'authorized-only': 'è¨±å¯ã•ã‚ŒãŸè·å“¡ã®ã¿',
        'enter-admin': 'ç®¡ç†è€…ã¨ã—ã¦å…¥åŠ›',

        // Episodes page
        'episode-archive': 'ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–',
        'nerv-archive': 'NERVã‚¢ãƒ¼ã‚«ã‚¤ãƒ–',
        'classified-database': 'æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹',
        'episodes': 'ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰',
        'gallery': 'ã‚®ãƒ£ãƒ©ãƒªãƒ¼',
        'episodes-unlocked': 'ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰:',
        'episodes-watched': 'è¦–è´æ¸ˆã¿ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰:',
        'total-episodes': 'ç·ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ•°:',
        'mark-watched': 'è¦–è´æ¸ˆã¿ã«ãƒžãƒ¼ã‚¯',
        'mark-unwatched': 'æœªè¦–è´ã«ãƒžãƒ¼ã‚¯',
        'episode-locked': 'ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒ­ãƒƒã‚¯æ¸ˆã¿',
        'all-images': 'å…¨ç”»åƒ',
        'pilots': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
        'units': 'ãƒ¦ãƒ‹ãƒƒãƒˆ',

        // Map page
        'tactical-map': 'ã‚¿ã‚¯ãƒ†ã‚£ã‚«ãƒ«ãƒžãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ',
        'map-controls': 'ãƒžãƒƒãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«:',
        'reset-view': 'ãƒ“ãƒ¥ãƒ¼ãƒªã‚»ãƒƒãƒˆ',
        'satellite': 'ã‚µãƒ†ãƒ©ã‚¤ãƒˆ',
        'terrain': 'åœ°å½¢',
        'labels': 'ãƒ©ãƒ™ãƒ«',
        'coordinates': 'åº§æ¨™:',
        'zoom': 'ã‚ºãƒ¼ãƒ :',
        'status': 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:',
        'tactical-overview': 'ã‚¿ã‚¯ãƒ†ã‚£ã‚«ãƒ«æ¦‚è¦',
        'nerv-headquarters': 'NERVæœ¬éƒ¨',
        'retractable-city': 'æ ¼ç´å¯èƒ½ãªéƒ½å¸‚',
        'at-field-barriers': 'A.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒªã‚¢',
        'nerv-hq-desc': 'æ±äº¬-3ã®åœ°ä¸‹æ·±ãã«éš ã•ã‚ŒãŸå·¨å¤§ãªåœ°ä¸‹è¦å¡žã§ã€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ãƒ¦ãƒ‹ãƒƒãƒˆã¨è¬Žã®ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ‰ã‚°ãƒžã‚’åŽå®¹ã—ã¦ã„ã‚‹ã€‚',
        'retractable-desc': 'æ±äº¬-3ã®å»ºç‰©ã¯ä½¿å¾’ã®æ”»æ’ƒæ™‚ã«åœ°é¢ã«æ ¼ç´ã§ãã€éƒ½å¸‚ã‚’ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ã®æˆ¦å ´ã«å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
        'at-barriers-desc': 'éƒ½å¸‚ã¯å¼·åŠ›ãªA.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒªã‚¢ã«ã‚ˆã£ã¦ä¿è­·ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ã ã‘ãŒä½¿å¾’ã®ç‹¬è‡ªã®A.T.ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è²«é€šã§ãã‚‹ã€‚',
        'emergency': 'ç·Šæ€¥äº‹æ…‹',
        'warning': 'è­¦å‘Š',
        'blood-type-blue': 'ãƒ–ãƒ©ãƒƒãƒ‰ã‚¿ã‚¤ãƒ—: ãƒ–ãƒ«ãƒ¼',
        'angel-identified': 'ä½¿å¾’',
        'identified': 'ç¢ºèªæ¸ˆã¿',
        'magi-code': 'MAGI-1-2-3',
        'nerv-classification': 'NERVåˆ†é¡ž',
        'evangelion-project': 'ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
        'nerv-systems': 'NERVã€‚å…¨ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­ã€‚',

        // Report page
        'mission-report': 'ãƒŸãƒƒã‚·ãƒ§ãƒ³å ±å‘Š',
        'classified-nerv': 'æ©Ÿå¯†NERVãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹',
        'security-level': 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ™ãƒ«: åˆ¶é™',
        'authorized-personnel': 'èªå¯ã•ã‚ŒãŸè·å“¡ã®ã¿',
        'enter-administrator': 'ç®¡ç†è€…ã¨ã—ã¦å…¥åŠ›',
        'admin-session': 'ç®¡ç†è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³æ´»æ€§',
        'terminal-id': 'ã‚¿ãƒ¼ãƒŸãƒŠãƒ«_ID: MAGI-01',
        'pilot-evaluation': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆè©•ä¾¡ãƒ•ã‚©ãƒ¼ãƒ ',
        'access-granted': 'ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯',
        'pilot-designation': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆæŒ‡å®š',
        'pilot-name-placeholder': 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆåã‚’å…¥åŠ›...',
        'sync-ratio-select': 'ã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³çŽ‡ (1-10)',
        'select-sync': 'ã‚·ãƒ³ã‚¯ãƒ­çŽ‡ã‚’é¸æŠž',
        'perfect-sync': '10 - å®Œå…¨ãªã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³',
        'exceptional-performance': '9 - å„ªã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹',
        'superior-compatibility': '8 - å„ªã‚ŒãŸäº’æ›æ€§',
        'above-average': '7 - å¹³å‡ä»¥ä¸Šã®ã‚·ãƒ³ã‚¯ãƒ­',
        'acceptable-performance': '6 - è¨±å®¹ã§ãã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹',
        'standard-baseline': '5 - æ¨™æº–ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³',
        'below-expectations': '4 - æœŸå¾…ã‚’ä¸‹å›žã‚‹',
        'poor-sync': '3 - è²§å¼±ãªã‚·ãƒ³ã‚¯ãƒ­ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³',
        'critical-issues': '2 - é‡å¤§ãªå•é¡Œ',
        'system-rejection': '1 - ã‚·ã‚¹ãƒ†ãƒ æ‹’å¦',
        'mission-details': 'ãƒŸãƒƒã‚·ãƒ§ãƒ³å ±å‘Šè©³ç´°',
        'mission-placeholder': 'è©³ç´°ãªãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ†æžã¨ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆè©•ä¾¡ã‚’å…¥åŠ›...',
        'transmit-magi': 'MAGIã‚·ã‚¹ãƒ†ãƒ ã«é€ä¿¡',
        'classification': 'åˆ†é¡ž:',
        'top-secret': 'æ¥µç§˜',
        'clearance': 'ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹:',
        'level-7': 'ãƒ¬ãƒ™ãƒ«7',
        'location': 'å ´æ‰€:',
        'tokyo-3': 'æ±äº¬-3'
    },

    // Spanish - Target Language
    es: {
        // Main navigation
        'nav-intro': 'INTRO',
        'nav-overview': 'VISIÃ“N GENERAL',
        'nav-pilots': 'PILOTOS',
        'nav-units': 'UNIDADES',
        'nav-archive': 'ARCHIVO',
        'nav-map': 'MAPA',
        'nav-report': 'REPORTE',

        // Intro section
        'sync-status': 'ESPERANDO ENTRADA DE PILOTO',
        'initiate-sync': 'INICIAR SINCRONIZACIÃ“N',
        'sync-ratio': 'RATIO SINC:',
        'neural-link': 'ENLACE NEURAL:',
        'at-field': 'CAMPO A.T.:',
        'standby': 'EN ESPERA',
        'inactive': 'INACTIVO',
        'synchronization-progress': 'SINCRONIZACIÃ“N EN PROGRESO',
        'synchronization-complete': 'SINCRONIZACIÃ“N COMPLETA',
        'connecting': 'CONECTANDO',
        'active': 'ACTIVO',
        'deploying': 'DESPLEGANDO',

        // Hero section
        'enter-world': 'ENTRAR AL MUNDO',
        'neon-genesis': 'NEON GENESIS',
        'evangelion': 'EVANGELION',

        // Synopsis section
        'series-overview': 'VISIÃ“N GENERAL DE LA SERIE',
        'synopsis-text': 'En el aÃ±o 2015, el mundo se encuentra al borde del apocalipsis. Seres misteriosos conocidos como "Ãngeles" amenazan la existencia de la humanidad, y solo los Evangelions - mecha bio-mecÃ¡nicos masivos - pueden enfrentarlos. Shinji Ikari, de catorce aÃ±os, es reclutado a regaÃ±adientes por su padre para pilotar la Unidad-01 de Evangelion para la organizaciÃ³n sombrÃ­a NERV. Pero a medida que Shinji se adentra mÃ¡s en este mundo de robots gigantes y horrores cÃ³smicos, descubre que la lÃ­nea entre salvaciÃ³n y destrucciÃ³n es mÃ¡s delgada de lo que jamÃ¡s imaginÃ³.',

        // Characters section
        'characters': 'PERSONAJES',
        'shinji-ikari': 'SHINJI IKARI',
        'pilot': 'PILOTO',
        'rei-ayanami': 'REI AYANAMI',
        'asuka-langley': 'ASUKA LANGLEY',
        'gendo-ikari': 'GENDO IKARI',
        'commander': 'COMANDANTE',
        'misato-katsuragi': 'MISATO KATSURAGI',
        'major': 'MAYOR',
        'kaworu-nagisa': 'KAWORU NAGISA',
        'angel': 'ÃNGEL',
        'ryoji-kaji': 'RYOJI KAJI',
        'agent': 'AGENTE',
        'ritsuko-akagi': 'RITSUKO AKAGI',
        'scientist': 'CIENTÃFICA',
        'select-character': 'SELECCIONA UN PERSONAJE',
        'click-character-info': 'Haz clic en un personaje arriba para ver su informaciÃ³n',
        'age': 'EDAD:',
        'role': 'ROL:',

        // Character roles
        'shinji-role': 'TERCER HIJO / PILOTO EVA-01',
        'rei-role': 'PRIMER HIJO / PILOTO EVA-00',
        'asuka-role': 'SEGUNDO HIJO / PILOTO EVA-02',
        'gendo-role': 'COMANDANTE NERV',
        'misato-role': 'DIRECTORA DE OPERACIONES',
        'kaworu-role': 'QUINTO HIJO / DECIMOSÃ‰PTIMO ÃNGEL',
        'ryoji-role': 'INSPECTOR ESPECIAL NERV / ESPÃA',
        'ritsuko-role': 'CIENTÃFICA JEFE / DESARROLLADORA EVA',

        // Characters descriptions
        'shinji-description': 'Un adolescente reacio empujado al papel de salvador de la humanidad. Lucha contra la depresiÃ³n, problemas de abandono y el peso de pilotar la Unidad-01 de Evangelion.',
        'rei-description': 'Una chica misteriosa y callada que pilota la Unidad-00 de Evangelion. Su naturaleza enigmÃ¡tica oculta conexiones profundas con el Proyecto de Instrumentalidad Humana.',
        'asuka-description': 'Una piloto orgullosa y competitiva de Alemania. Su personalidad extrovertida enmascara profundas inseguridades y un pasado traumÃ¡tico.',
        'gendo-description': 'El padre distanciado de Shinji y comandante de NERV. Un hombre frÃ­o y calculador cuyo objetivo final es reunirse con su esposa fallecida a travÃ©s del Proyecto de Instrumentalidad Humana.',
        'misato-description': 'Una mujer joven que sirve como guardiana de Shinji y Asuka. A pesar de su comportamiento casual, es una tÃ¡ctica hÃ¡bil atormentada por recuerdos del Segundo Impacto.',
        'kaworu-description': 'El Ãngel final en aparecer, que toma forma humana. Su relaciÃ³n con Shinji se vuelve fundamental para la conclusiÃ³n de la serie.',
        'ryoji-description': 'Un misterioso triple agente que trabaja para mÃºltiples organizaciones. Ex amante de Misato y figura clave investigando la verdadera agenda de NERV y el Proyecto de Instrumentalidad Humana.',
        'ritsuko-description': 'CientÃ­fica jefe de NERV y desarrolladora principal de las unidades Evangelion. Hija de la fallecida Dra. Naoko Akagi, mantiene el sistema informÃ¡tico MAGI y alberga sentimientos complejos sobre su trabajo.',

        // Eva section
        'evangelion-units': 'UNIDADES EVANGELION',
        'eva-designation': 'DESIGNACIÃ“N:',
        'eva-pilot': 'PILOTO:',
        'eva-status': 'ESTADO:',
        'eva-sync-ratio': 'RATIO SINC:',
        'eva-at-field': 'CAMPO A.T.:',
        'eva-entry-plug': 'TAPÃ“N DE ENTRADA:',
        'classified': '[CLASIFICADO]',
        'unit-02': 'UNIDAD-02',
        'unit-01': 'UNIDAD-01',
        'unit-00': 'UNIDAD-00',
        'eva-active': 'ACTIVO',
        'eva-berserk': 'MODO BERSERKER',
        'eva-prototype': 'PROTOTIPO',
        'eva-operational': 'OPERACIONAL',
        'eva-unlimited': 'ILIMITADO',
        'eva-stable': 'ESTABLE',
        'lcl-filled': 'LCL LLENO',
        'lcl-saturated': 'LCL SATURADO',
        'lcl-optimal': 'LCL Ã“PTIMO',

        // Footer
        'landmark-series': 'Una serie icÃ³nica',
        'redefined-anime': 'que redefiniÃ³ el anime',
        'developer': 'DESARROLLADOR',
        'academic-project': 'PROYECTO ACADÃ‰MICO',
        'programming-4': 'ProgramaciÃ³n 4',
        'educational-purposes': 'Creado con fines educativos.',
        
        // Sync Overlay
        'sync-ratio': 'PROPORCIÃ“N DE SINCRONIZACIÃ“N:',
        'neural-link': 'ENLACE NEURAL:',
        'at-field': 'CAMPO A.T.:',
        'standby': 'ESPERA',
        'inactive': 'INACTIVO',
        'awaiting-pilot': 'ESPERANDO ENTRADA DEL PILOTO',
        'initiate-sync': 'INICIAR SINCRONIZACIÃ“N',

        // Map page
        'tactical-map': 'SISTEMA DE MAPA TÃCTICO',
        'map-controls': 'CONTROLES DEL MAPA:',
        'reset-view': 'RESTABLECER VISTA',
        'satellite': 'SATÃ‰LITE',
        'terrain': 'TERRENO',
        'labels': 'ETIQUETAS',

        // Report page
        'mission-report': 'INFORME DE MISIÃ“N',
        'classified-nerv': 'BASE DE DATOS CLASIFICADA NERV',
        'security-level': 'NIVEL DE SEGURIDAD: RESTRINGIDO',
        'authorized-only': 'SOLO PERSONAL AUTORIZADO',
        'enter-admin': 'INGRESAR COMO ADMINISTRADOR',

        // Episodes page
        'episode-archive': 'Archivo de Episodios',
        'nerv-archive': 'ARCHIVO NERV',
        'classified-database': 'ACCESO A BASE DE DATOS CLASIFICADA',
        'episodes': 'EPISODIOS',
        'gallery': 'GALERÃA',
        'episodes-unlocked': 'EPISODIOS DESBLOQUEADOS:',
        'episodes-watched': 'EPISODIOS VISTOS:',
        'total-episodes': 'EPISODIOS TOTALES:',
        'mark-watched': 'Marcar como visto',
        'mark-unwatched': 'Marcar como no visto',
        'episode-locked': 'Episodio bloqueado',
        'all-images': 'TODAS LAS IMÃGENES',
        'pilots': 'PILOTOS',
        'units': 'UNIDADES',

        // Map page
        'tactical-map': 'SISTEMA DE MAPA TÃCTICO',
        'map-controls': 'CONTROLES DE MAPA:',
        'reset-view': 'RESETEAR VISTA',
        'satellite': 'SATÃ‰LITE',
        'terrain': 'TERRENO',
        'labels': 'ETIQUETAS',
        'coordinates': 'COORDENADAS:',
        'zoom': 'ZOOM:',
        'status': 'ESTADO:',
        'tactical-overview': 'VISIÃ“N TÃCTICA',
        'nerv-headquarters': 'CUARTEL GENERAL NERV',
        'retractable-city': 'CIUDAD RETRÃCTIL',
        'at-field-barriers': 'BARRERAS DE CAMPO A.T.',
        'nerv-hq-desc': 'Oculto en las profundidades bajo Tokyo-3, la fortaleza subterrÃ¡nea masiva alberga las unidades Evangelion y el misterioso Dogma Central.',
        'retractable-desc': 'Los edificios de Tokyo-3 pueden retraerse en el suelo durante ataques de Ãngeles, transformando la ciudad en un campo de batalla para los Evangelions.',
        'at-barriers-desc': 'La ciudad estÃ¡ protegida por poderosas barreras de Campo A.T., pero solo los Evangelions pueden penetrar los Campos A.T. propios de los Ãngeles.',
        'emergency': 'EMERGENCIA',
        'warning': 'ADVERTENCIA',
        'blood-type-blue': 'TIPO DE SANGRE: AZUL',
        'angel-identified': 'ÃNGEL',
        'identified': 'IDENTIFICADO',
        'magi-code': 'MAGI-1-2-3',
        'nerv-classification': 'CLASIFICACIÃ“N NERV',
        'evangelion-project': 'PROYECTO EVANGELION',
        'nerv-systems': 'NERV. Todos los sistemas operacionales.',

        // Report page
        'mission-report': 'REPORTE DE MISIÃ“N',
        'classified-nerv': 'BASE DE DATOS CLASIFICADA NERV',
        'security-level': 'NIVEL DE SEGURIDAD: RESTRINGIDO',
        'authorized-personnel': 'SOLO PERSONAL AUTORIZADO',
        'enter-administrator': 'ENTRAR COMO ADMINISTRADOR',
        'admin-session': 'SESIÃ“N DE ADMINISTRADOR ACTIVA',
        'terminal-id': 'ID_TERMINAL: MAGI-01',
        'pilot-evaluation': 'FORMULARIO DE EVALUACIÃ“N DE PILOTO',
        'access-granted': 'ACCESO CONCEDIDO',
        'pilot-designation': 'DESIGNACIÃ“N DE PILOTO',
        'pilot-name-placeholder': 'Ingresar nombre del piloto...',
        'sync-ratio-select': 'RATIO DE SINCRONIZACIÃ“N (1-10)',
        'select-sync': 'Seleccionar Ratio Sinc',
        'perfect-sync': '10 - SincronizaciÃ³n Perfecta',
        'exceptional-performance': '9 - Rendimiento Excepcional',
        'superior-compatibility': '8 - Compatibilidad Superior',
        'above-average': '7 - Sinc Por Encima del Promedio',
        'acceptable-performance': '6 - Rendimiento Aceptable',
        'standard-baseline': '5 - LÃ­nea Base EstÃ¡ndar',
        'below-expectations': '4 - Por Debajo de las Expectativas',
        'poor-sync': '3 - SincronizaciÃ³n Pobre',
        'critical-issues': '2 - Problemas CrÃ­ticos',
        'system-rejection': '1 - Rechazo del Sistema',
        'mission-details': 'DETALLES DEL REPORTE DE MISIÃ“N',
        'mission-placeholder': 'Ingresar anÃ¡lisis detallado de misiÃ³n y evaluaciÃ³n del piloto...',
        'transmit-magi': 'TRANSMITIR AL SISTEMA MAGI',
        'classification': 'CLASIFICACIÃ“N:',
        'top-secret': 'ALTO SECRETO',
        'clearance': 'AUTORIZACIÃ“N:',
        'level-7': 'NIVEL 7',
        'location': 'UBICACIÃ“N:',
        'tokyo-3': 'TOKYO-3'
    }
};

// Language system
class LanguageSystem {
    constructor() {
        this.currentLanguage = 'jp'; // Start with Japanese
        this.isAnimating = false;
        this.translations = translations; // Assign global translations object
        this.glitchChars = ['01', '10', '11', '00', 'â–ˆ', 'â–„', 'â–€', 'â–‘', 'â–’', 'â–“', 'â– ', 'â–¡', 'â–²', 'â–¼', 'â—„', 'â–º', 'â—‹', 'â—', 'â—¦', 'â€£', 'â€»', 'âˆ´', 'âˆµ', 'âš¡', 'âŸ¨', 'âŸ©', 'ã€ˆ', 'ã€‰', 'ã€Ž', 'ã€', 'ã€Œ', 'ã€', 'ï¼¡', 'ï¼¢', 'ï¼£', 'â‘ ', 'â‘¡', 'â‘¢', 'â €', 'â ', 'â ƒ', 'â ‡', 'â ', 'â Ÿ', 'â ¿', 'â¡¿', 'â£¿'];
        this.init();
    }

    init() {
        this.addLanguageAttributes();
        this.setupGlitchTransition();
        this.setupSectionObserver();
        
        // Add keyboard shortcut for manual trigger (L for Language)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'l' || e.key === 'L') {
                if (!this.isAnimating) {
                    this.triggerGlitchTransition();
                }
            }
        });
    }

    // Add data attributes to all translatable elements
    addLanguageAttributes() {
        const translatableElements = [
            // Navigation
            { selector: 'a[href="#hero"]', key: 'nav-intro' },
            { selector: 'a[href="#synopsis"], a[href="index.html#synopsis"]', key: 'nav-overview' },
            { selector: 'a[href="#characters"], a[href="index.html#characters"]', key: 'nav-pilots' },
            { selector: 'a[href="#evas"], a[href="index.html#evas"]', key: 'nav-units' },
            { selector: 'a[href="episodes.html"]', key: 'nav-archive' },
            { selector: 'a[href="map.html"]', key: 'nav-map' },
            { selector: 'a[href="report.html"]', key: 'nav-report' },

            // Intro section
            { selector: '.status-text', key: 'sync-status' },
            { selector: '.intro-start-btn .btn-text', key: 'initiate-sync' },
            { selector: '#ctaButton', key: 'enter-world' },

            // Hero section
            { selector: '.subtitle', key: 'neon-genesis' },

            // Synopsis section
            { selector: '.synopsis-section .section-title', key: 'series-overview' },
            { selector: '.synopsis-text', key: 'synopsis-text' },

            // Characters section
            { selector: '.character-gallery .section-title', key: 'characters' },
            { selector: '#infoName', key: 'select-character' },
            { selector: '#infoDescription', key: 'click-character-info' },
            { selector: '.stat-label', key: 'age', index: 0 },
            { selector: '.stat-label', key: 'role', index: 1 },

            // Eva section
            { selector: '.eva-section .section-title', key: 'evangelion-units' },

            // Footer
            { selector: '.footer-section p', key: 'redefined-anime', index: 0 },
            { selector: '.footer-section h3', key: 'developer', index: 1 },
            { selector: '.footer-section h3', key: 'academic-project', index: 2 },
            { selector: '.footer-section p', key: 'programming-4', index: 1 },
            { selector: '.footer-bottom p', key: 'educational-purposes' },
            
            // Sync Overlay (already have data-translate, but need to be registered)
            { selector: '.label[data-translate="sync-ratio"]', key: 'sync-ratio' },
            { selector: '.label[data-translate="neural-link"]', key: 'neural-link' },
            { selector: '.label[data-translate="at-field"]', key: 'at-field' },
            { selector: '.value[data-translate="standby"]', key: 'standby' },
            { selector: '.value[data-translate="inactive"]', key: 'inactive' },
            { selector: '.status-text[data-translate="awaiting-pilot"]', key: 'awaiting-pilot' },
            { selector: '.btn-text[data-translate="initiate-sync"]', key: 'initiate-sync' },

            // Episodes page
            { selector: '.library-title', key: 'nerv-archive' },
            { selector: '.library-subtitle', key: 'classified-database' },
            { selector: '.tab-text', key: 'episodes', index: 0 },
            { selector: '.tab-text', key: 'gallery', index: 1 },
            { selector: '.stat-label[data-translate="episodes-unlocked"]', key: 'episodes-unlocked' },
            { selector: '.stat-label[data-translate="episodes-watched"]', key: 'episodes-watched' },
            { selector: '.stat-label[data-translate="total-episodes"]', key: 'total-episodes' },
            { selector: '#dialogWatchText', key: 'mark-watched' },

            // Map page
            { selector: '.map-title', key: 'tactical-map' },
            { selector: '.controls-title', key: 'map-controls' },
            { selector: '.info-panel h3', key: 'tactical-overview' },

            // Report page
            { selector: '.report-title', key: 'mission-report' },
            { selector: '.report-subtitle', key: 'classified-nerv' },
            { selector: '.modal-title', key: 'pilot-evaluation' }
        ];

        translatableElements.forEach(({ selector, key, page, index }) => {
            const elements = document.querySelectorAll(selector);
            if (elements.length > 0) {
                const element = index !== undefined ? elements[index] : elements[0];
                if (element && (!page || window.location.pathname.includes(page))) {
                    element.setAttribute('data-translate', key);
                }
            }
        });

        // Set initial Japanese text
        this.updateLanguage('jp');
    }

    // Setup the individual text glitch system
    setupGlitchTransition() {
        // Add CSS for individual element glitch effects
        this.addGlitchStyles();
    }

    // Setup Intersection Observer to trigger translations per section
    setupSectionObserver() {
        // Immediately translate navigation since it's always visible
        const nav = document.querySelector('.page-nav');
        if (nav) {
            console.log('ðŸ”¥ Immediately translating navigation (always visible)');
            this.translateSection(nav);
        }
        
        // Immediately translate intro overlay since it's visible on page load
        const introOverlay = document.querySelector('.intro-overlay');
        if (introOverlay) {
            console.log('ðŸ”¥ Immediately translating intro overlay (visible on load)');
            this.translateSection(introOverlay);
        }
        
        // Define sections based on page content - only observe sections that exist
        const allPossibleSections = [
            '.intro-overlay', // Intro overlay with sync interface - index.html
            '.hero-section', // Hero section (after video) - index.html
            '.synopsis-section', // Synopsis - index.html
            '.character-gallery', // Characters - index.html
            '.eva-section', // EVA Units - index.html
            '.episodes-library-header', // Episodes header - episodes.html
            '.episodes-library', // Episodes content - episodes.html
            '.map-section', // Map section - map.html
            '.report-header', // Report header - report.html
            '.footer' // Footer - all pages
        ];
        
        // Only include sections that actually exist on this page
        const sectionSelectors = allPossibleSections.filter(selector => {
            const exists = document.querySelector(selector) !== null;
            if (exists) {
                console.log(`âœ… Found section: ${selector}`);
            }
            return exists;
        });

        // Create intersection observer
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                console.log(`ðŸ” Section observed: ${entry.target.className || entry.target.tagName}`, {
                    isIntersecting: entry.isIntersecting,
                    intersectionRatio: entry.intersectionRatio,
                    hasBeenTranslated: entry.target.hasAttribute('data-translated')
                });
                
                if (entry.isIntersecting && entry.intersectionRatio > 0.1) {
                    // Check if this section hasn't been translated yet
                    const section = entry.target;
                    if (!section.hasAttribute('data-translated')) {
                        console.log(`ðŸŽ¯ Triggering translation for section: ${section.className || section.tagName}`);
                        this.translateSection(section);
                        section.setAttribute('data-translated', 'true');
                    }
                }
            });
        }, {
            rootMargin: '0px',
            threshold: 0.1 // Trigger when 10% of section is visible
        });

        // Observe each existing section
        sectionSelectors.forEach(selector => {
            const section = document.querySelector(selector);
            console.log(`ðŸ“ Observing section: ${selector} (${section.className || section.tagName})`);
            observer.observe(section);
        });

        // Store observer for cleanup if needed
        this.sectionObserver = observer;
    }

    // Add CSS styles for the glitch effect
    addGlitchStyles() {
        const style = document.createElement('style');
        style.textContent = `

            .language-transition {
                animation: language-text-glitch 0.3s ease-in-out;
                pointer-events: none;
            }

            @keyframes language-text-glitch {
                0% { 
                    transform: translateX(0) skew(0deg);
                    opacity: 1;
                    filter: blur(0px);
                }
                10% {
                    transform: translateX(-3px) skew(-2deg);
                    opacity: 0.9;
                    color: var(--warning-yellow);
                    text-shadow: 3px 0 var(--primary-red), -3px 0 var(--terminal-green);
                    filter: blur(0.5px);
                }
                20% {
                    transform: translateX(4px) skew(3deg);
                    opacity: 0.7;
                    color: var(--primary-red);
                    text-shadow: -2px 0 var(--warning-yellow), 2px 0 var(--terminal-green);
                    filter: blur(1px) contrast(1.5);
                }
                30% {
                    transform: translateX(-2px) skew(-1deg);
                    opacity: 0.5;
                    color: var(--warning-yellow);
                    text-shadow: 4px 0 var(--primary-red), -4px 0 var(--terminal-green);
                    filter: blur(1.5px) saturate(2);
                }
                40% {
                    transform: translateX(5px) skew(2deg);
                    opacity: 0.3;
                    color: var(--terminal-green);
                    text-shadow: -3px 0 var(--warning-yellow), 3px 0 var(--primary-red);
                    filter: blur(2px) brightness(1.5);
                }
                50% {
                    transform: translateX(-4px) skew(-3deg);
                    opacity: 0.2;
                    color: var(--primary-red);
                    text-shadow: 5px 0 var(--terminal-green), -5px 0 var(--warning-yellow);
                    filter: blur(2.5px) hue-rotate(180deg);
                }
                60% {
                    transform: translateX(3px) skew(1deg);
                    opacity: 0.4;
                    color: var(--warning-yellow);
                    text-shadow: -4px 0 var(--primary-red), 4px 0 var(--terminal-green);
                    filter: blur(2px) contrast(2);
                }
                70% {
                    transform: translateX(-1px) skew(-0.5deg);
                    opacity: 0.6;
                    color: var(--terminal-green);
                    text-shadow: 2px 0 var(--primary-red), -2px 0 var(--warning-yellow);
                    filter: blur(1.5px);
                }
                80% {
                    transform: translateX(2px) skew(0.5deg);
                    opacity: 0.8;
                    color: var(--terminal-green);
                    text-shadow: 1px 0 var(--primary-red), -1px 0 var(--warning-yellow);
                    filter: blur(1px);
                }
                90% {
                    transform: translateX(-1px) skew(0deg);
                    opacity: 0.9;
                    color: var(--terminal-green);
                    text-shadow: 0 0 10px var(--terminal-green);
                    filter: blur(0.5px);
                }
                100% {
                    transform: translateX(0) skew(0deg);
                    opacity: 1;
                    color: var(--terminal-green);
                    text-shadow: 0 0 5px var(--terminal-green);
                    filter: blur(0px);
                }
            }

            .element-glitch-active {
                animation: language-text-glitch 0.8s ease-in-out;
                position: relative;
                z-index: 1000;
            }

            .element-glitch-active::before,
            .element-glitch-active::after {
                content: attr(data-glitch-text);
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0.8;
                z-index: -1;
            }

            .element-glitch-active::before {
                animation: glitch-clone-1 0.8s ease-in-out;
                color: var(--primary-red);
                text-shadow: 2px 0 var(--primary-red);
            }

            .element-glitch-active::after {
                animation: glitch-clone-2 0.8s ease-in-out;
                color: var(--terminal-green);
                text-shadow: -2px 0 var(--terminal-green);
            }

            @keyframes glitch-clone-1 {
                0%, 100% { transform: translateX(0); opacity: 0; }
                20% { transform: translateX(-2px); opacity: 0.8; }
                40% { transform: translateX(3px); opacity: 0.6; }
                60% { transform: translateX(-1px); opacity: 0.4; }
                80% { transform: translateX(1px); opacity: 0.2; }
            }

            @keyframes glitch-clone-2 {
                0%, 100% { transform: translateX(0); opacity: 0; }
                25% { transform: translateX(2px); opacity: 0.7; }
                45% { transform: translateX(-3px); opacity: 0.5; }
                65% { transform: translateX(1px); opacity: 0.3; }
                85% { transform: translateX(-1px); opacity: 0.1; }
            }

            .screen-flash {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(255, 255, 255, 0.1);
                pointer-events: none;
                z-index: 9999;
                opacity: 0;
                animation: flash-effect 0.1s ease-out;
            }

            @keyframes flash-effect {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }

            .element-corruption {
                position: relative;
                overflow: hidden;
            }

            .element-corruption::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 51, 0, 0.3), transparent);
                animation: scan-line 0.8s ease-in-out;
                z-index: 1;
            }

            @keyframes scan-line {
                0% { left: -100%; }
                100% { left: 100%; }
            }

            @media (max-width: 768px) {
                .glitch-text-layer {
                    font-size: 2.5rem;
                }
            }

            @media (max-width: 480px) {
                .glitch-text-layer {
                    font-size: 2rem;
                }
            }
        `;
        document.head.appendChild(style);
    }

    // Trigger the real-time translation glitch system
    // Translate a specific section
    async translateSection(section) {
        if (this.currentLanguage === 'es') {
            console.log('ðŸš« Section already in Spanish, skipping translation');
            return;
        }
        
        console.log('ðŸŽ­ Translating section:', section.className || section.tagName);
        
        // Find all translatable elements within this section
        const elements = section.querySelectorAll('[data-translate]');
        console.log(`ðŸ“ Found ${elements.length} translatable elements in section`);
        if (elements.length > 0) {
            elements.forEach((el, i) => {
                const key = el.getAttribute('data-translate');
                console.log(`  - Element ${i + 1}: ${el.tagName.toLowerCase()} with key "${key}"`);
            });
        }
        
        if (elements.length === 0) {
            console.warn('âš ï¸ No translatable elements found in section');
            return;
        }
        
        await this.performSectionTransition(elements);
    }

    async triggerGlitchTransition() {
        if (this.isAnimating) return;
        this.isAnimating = true;

        console.log('Real-time translation system activated...');
        
        // Directly start the page translation without overlay
        await this.performPageTransition();

        this.isAnimating = false;
    }

    // Perform section-based translation with element glitching
    async performSectionTransition(elements) {
        const elementsArray = Array.from(elements);
        
        console.log(`ðŸŽ¯ Processing ${elementsArray.length} elements in section...`);
        
        // Create array of promises for simultaneous element processing
        const promises = elementsArray.map((element, index) => {
            const translateKey = element.getAttribute('data-translate');
            const originalText = element.textContent.trim();
            const targetText = this.translations.es[translateKey] || originalText;
            
            // Determine element characteristics for glitch intensity
            const isLargeText = originalText.length > 20;
            const isPrimary = ['h1', 'h2', 'h3'].includes(element.tagName.toLowerCase());
            const intensity = isPrimary ? 0.8 : 0.6;
            
            return this.glitchElementTransition(element, originalText, targetText, {
                intensity,
                isLargeText,
                isPrimary,
                index
            });
        });
        
        // Execute all element transitions simultaneously
        await Promise.all(promises);
        
        console.log('âœ… Section translation completed!');
    }

    // Perform the actual page translation with element glitching
    async performPageTransition() {
        const translatableElements = document.querySelectorAll('[data-translate]');
        const elementsArray = Array.from(translatableElements);

        // Process all elements simultaneously for synchronized translation
        const promises = [];
        
        elementsArray.forEach((element, i) => {
            const key = element.getAttribute('data-translate');
            const originalText = element.textContent;
            const targetText = translations.es[key];
            
            if (targetText) {
                // Set up glitch data attribute for CSS effects
                element.setAttribute('data-glitch-text', originalText);
                
                // Vary corruption intensity based on text length and position
                const corruptionIntensity = Math.min(0.8, originalText.length / 30);
                const isLargeText = originalText.length > 50;
                const isPrimaryElement = element.tagName === 'H1' || element.tagName === 'H2' || element.classList.contains('section-title');
                
                // Start all element glitches simultaneously
                const promise = this.glitchElementTransition(element, originalText, targetText, {
                    intensity: corruptionIntensity,
                    isLargeText: isLargeText,
                    isPrimary: isPrimaryElement,
                    index: i
                });
                
                promises.push(promise);
            }
        });
        
        // Wait for all elements to complete their transitions
        await Promise.all(promises);

        this.currentLanguage = 'es';
    }

    // Synchronized translation glitch effect
    async glitchElementTransition(element, originalText, targetText, options = {}) {
        const { intensity = 0.7, isLargeText = false, isPrimary = false, index = 0 } = options;
        
        // Small random delay to prevent completely synchronous start (looks more natural)
        const startDelay = Math.random() * 200;
        await this.delay(startDelay);
        
        // Phase 1: Add subtle scan line effect
        element.classList.add('element-corruption');
        
        // Phase 2: Start glitch effect with rare screen flash for primary elements only
        if (isPrimary && Math.random() < 0.4) { // Only flash important elements occasionally
            this.createScreenFlash();
        }
        element.classList.add('element-glitch-active');
        
        // Phase 3: Character-by-character corruption with natural feel
        await this.corruptTextEffect(element, originalText, targetText, intensity, isLargeText);
        
        // Phase 4: Brief complete corruption before final text (cleaner transition)
        const finalCorruption = this.generateCorruptedText(targetText);
        element.textContent = finalCorruption;
        await this.delay(100);
        
        // Phase 5: Set final text without additional flash (more natural)
        element.textContent = targetText;
        
        // Phase 6: Quick cleanup for natural feel
        const cleanupDelay = isLargeText ? 600 : 400; // Faster cleanup
        setTimeout(() => {
            element.classList.remove('element-glitch-active', 'language-transition', 'element-corruption');
            element.removeAttribute('data-glitch-text');
        }, cleanupDelay);
    }

    // Create screen flash effect
    createScreenFlash() {
        const flash = document.createElement('div');
        flash.className = 'screen-flash';
        document.body.appendChild(flash);
        
        setTimeout(() => {
            flash.remove();
        }, 100);
    }

    // Character-by-character corruption effect with clean transition
    async corruptTextEffect(element, originalText, targetText, intensity = 0.7, isLargeText = false) {
        const maxLength = Math.max(originalText.length, targetText.length);
        const steps = isLargeText ? 16 : 10; // Slightly fewer steps for cleaner transition
        const baseDelay = isLargeText ? 45 : 65;
        
        for (let step = 0; step < steps; step++) {
            let corruptedText = '';
            const corruptionProgress = step / steps;
            const transitionPoint = 0.6; // Later transition point to avoid overlap
            
            for (let i = 0; i < maxLength; i++) {
                const charProgress = i / maxLength;
                const shouldShowTarget = corruptionProgress > transitionPoint && 
                                        charProgress < (corruptionProgress - transitionPoint) / (1 - transitionPoint);
                
                if (shouldShowTarget && i < targetText.length) {
                    // Clean transition: show target character
                    corruptedText += targetText[i];
                } else if (corruptionProgress > 0.2 && Math.random() < intensity * (1 - corruptionProgress * 0.5)) {
                    // Show corruption characters (avoid showing original text during corruption)
                    const charPool = step < steps * 0.4 ? 
                        this.glitchChars.slice(0, 16) : // Early: binary and blocks
                        this.glitchChars; // Later: all characters
                    corruptedText += charPool[Math.floor(Math.random() * charPool.length)];
                } else if (corruptionProgress < 0.3) {
                    // Early phase: show original with occasional corruption
                    if (Math.random() < 0.15) {
                        corruptedText += this.glitchChars[Math.floor(Math.random() * 8)];
                    } else {
                        corruptedText += originalText[i] || '';
                    }
                } else {
                    // Middle/late phase: prefer corruption over original to avoid overlap
                    corruptedText += this.glitchChars[Math.floor(Math.random() * this.glitchChars.length)];
                }
            }
            
            element.textContent = corruptedText;
            
            // Smooth timing progression
            const stepDelay = baseDelay + Math.random() * 20;
            const progressFactor = step > steps * 0.8 ? 1.3 : 1; // Slow down at the end
            await this.delay(stepDelay * progressFactor);
        }
    }

    // Generate corrupted/glitched text
    generateCorruptedText(originalText) {
        let corrupted = '';
        for (let i = 0; i < originalText.length; i++) {
            if (Math.random() > 0.7) {
                corrupted += this.glitchChars[Math.floor(Math.random() * this.glitchChars.length)];
            } else {
                corrupted += originalText[i];
            }
        }
        return corrupted;
    }

    // Update all translatable elements to specified language
    updateLanguage(lang) {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            if (this.translations[lang] && this.translations[lang][key]) {
                element.textContent = this.translations[lang][key];
            }
        });
    }

    // Utility delay function
    delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Manual trigger for testing
    manualTrigger() {
        if (!this.isAnimating) {
            this.triggerGlitchTransition();
        }
    }
}

// Initialize the language system
let languageSystem;
document.addEventListener('DOMContentLoaded', function() {
    // Initialize with a small delay to ensure all content is loaded
    setTimeout(() => {
        languageSystem = new LanguageSystem();
        
        // Make it available globally for testing
        window.languageSystem = languageSystem;
        
        console.log('Language system initialized - Section-based translation ready! Press L for manual trigger.');
        console.log('You can manually trigger the glitch with: window.languageSystem.triggerGlitchTransition()');
        console.log('Current language:', languageSystem.currentLanguage);
    }, 500);
});
